<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Operativa - Rischio Maremoto Costa Jonica</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <style>
        :root {
            --primary-color: #1a237e; /* Blu scuro */
            --secondary-color: #f4f6f8; /* Grigio chiaro sfondo */
            --dark-color: #263238; /* Grigio scuro testo */
            --light-color: #ffffff;
            --danger-color: #d32f2f;
            --warning-color: #f57c00;
            --info-color: #0288d1;
            --border-radius: 8px;
            --shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        body {
            font-family: 'Roboto', sans-serif;
            line-height: 1.6;
            margin: 0;
            background-color: var(--secondary-color);
            color: var(--dark-color);
        }
        .container {
            max-width: 1400px;
            margin: auto;
            padding: 20px;
        }
        .main-header {
            background: var(--light-color);
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid #e0e0e0;
        }
        .main-header .title h1 {
            margin: 0;
            color: var(--primary-color);
            font-size: 2rem;
        }
        .main-header .title p {
             margin: 0;
             font-weight: 500;
        }
        .operator-selector label {
            font-weight: 700;
            margin-right: 10px;
            color: var(--primary-color);
        }
        .operator-selector select {
            padding: 8px 12px;
            border-radius: var(--border-radius);
            border: 2px solid var(--primary-color);
            font-size: 1rem;
            font-weight: 500;
        }
        .tabs {
            display: flex;
            background: var(--light-color);
            flex-wrap: wrap;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            margin-bottom: 20px;
            overflow: hidden;
        }
        .tab-link {
            padding: 15px 20px;
            cursor: pointer;
            border: none;
            background: transparent;
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--dark-color);
            transition: all 0.3s ease;
            flex-grow: 1;
            text-align: center;
            border-bottom: 3px solid transparent;
        }
        .tab-link:hover {
            background-color: #e8eaf6;
        }
        .tab-link.active {
            color: var(--primary-color);
            border-bottom: 3px solid var(--primary-color);
        }
        .tab-content {
            display: none;
            padding: 20px;
            background: var(--light-color);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
        }
        .tab-content.active {
            display: block;
        }
        .alert-section {
            border-radius: var(--border-radius);
            padding: 20px;
            margin-top: 20px;
            border: 1px solid #ddd;
            transition: all 0.3s ease;
        }
        .alert-orange { background-color: #fff3e0; }
        .alert-red { background-color: #ffebee; }
        
        .section-highlight {
            box-shadow: 0 0 0 4px var(--info-color);
            border-color: var(--info-color);
        }

        h2, h3, h4 {
            color: var(--primary-color);
        }
        h2 { border-bottom: 2px solid #e0e0e0; padding-bottom: 10px; }
        h4.alert-title-orange { color: var(--warning-color); font-size: 1.8rem; }
        h4.alert-title-red { color: var(--danger-color); font-size: 1.8rem; }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }
        th, td {
            padding: 12px 15px;
            border: 1px solid #e0e0e0;
            text-align: left;
        }
        th {
            background-color: #e8eaf6;
            font-weight: 700;
        }
        td i {
            margin-right: 8px;
            color: var(--primary-color);
            width: 20px;
            text-align: center;
        }
        .grid-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
        }
        .card {
            background: var(--light-color);
            padding: 20px;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
        }
        .card h3 { margin-top: 0; }
        .card .icon { font-size: 1.5rem; margin-right: 10px; color: var(--primary-color); }
        .procedure-list {
            list-style-type: none;
            padding: 0;
        }
        .procedure-list li {
            background: #e3f2fd;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: var(--border-radius);
            border-left: 5px solid var(--info-color);
            display: flex;
            align-items: center;
        }
        .procedure-list i {
            font-size: 1.5rem;
            margin-right: 15px;
            color: var(--info-color);
        }
        .note, .primary-task-info {
            background-color: #e7f3fe;
            border-left: 6px solid var(--info-color);
            padding: 15px;
            margin-top: 20px;
            border-radius: var(--border-radius);
        }
        .primary-task-info {
            display: none; /* Hidden by default */
            background-color: #e8eaf6;
            border-left-color: var(--primary-color);
        }
        .primary-task-info i {
            margin-right: 10px;
        }
        footer {
            text-align: center;
            padding: 20px;
            margin-top: 20px;
            background-color: var(--dark-color);
            color: var(--light-color);
        }
    </style>
</head>
<body>

    <header class="main-header">
        <div class="title">
            <h1><i class="fas fa-water"></i> Dashboard Operativa Maremoto</h1>
            <p>Costa Jonica Materana</p>
        </div>
        <div class="operator-selector">
            <label for="operator-role"><i class="fas fa-user-shield"></i> Seleziona Ruolo Operativo:</label>
            <select id="operator-role" onchange="changeOperatorView(this.value)">
                <option value="tutti">Tutti / Prefettura</option>
                <option value="forze_ordine">Forze dell'Ordine</option>
                <option value="sindaco">Sindaco / Ufficio Tecnico</option>
                <option value="volontariato">Volontariato</option>
            </select>
        </div>
    </header>

    <div class="container">
        <nav class="tabs">
            <button class="tab-link active" onclick="openTab(event, 'Generale')"><i class="fas fa-info-circle"></i> Info Generali</button>
            <button class="tab-link" onclick="openTab(event, 'NS-Rotondella')">Nova Siri - Rotondella</button>
            <button class="tab-link" onclick="openTab(event, 'Policoro')">Policoro</button>
            <button class="tab-link" onclick="openTab(event, 'Scanzano')">Scanzano J.</button>
            <button class="tab-link" onclick="openTab(event, 'Pisticci')">Pisticci</button>
            <button class="tab-link" onclick="openTab(event, 'Bernalda')">Bernalda</button>
        </nav>
        
        <div class="primary-task-info" id="task-info-box">
             <p><i class="fas fa-bullseye"></i><strong>Compiti Primari:</strong> <span id="task-info-text"></span></p>
        </div>

        <div id="Generale" class="tab-content active">
            <h2>Procedure Generali e Livelli di Allerta</h2>
            [cite_start]<p>Questo portale riassume le procedure operative e i modelli di intervento da attuare in caso di allarme maremoto per i comuni della costa Jonica: Nova Siri, Rotondella, Policoro, Scanzano Jonico, Pisticci e Bernalda[cite: 28].</p>

            <div class="grid-container">
                <div class="card alert-orange">
                    <h3><i class="fas fa-triangle-exclamation"></i> LIVELLO 1: Allerta Arancione (Advisory)</h3>
                    <p><strong><i class="fas fa-water"></i> Condizione:</strong> Altezza d'onda (Run-up) <strong>&lt; [cite_start]1 metro</strong>[cite: 62].</p>
                    [cite_start]<p><strong><i class="fas fa-ruler-horizontal"></i> Inondazione:</strong> Ingressione media a terra di <strong>400 metri</strong>, con picchi di 900 metri in prossimità delle foci dei fiumi[cite: 80].</p>
                </div>
                <div class="card alert-red">
                    <h3><i class="fas fa-skull-crossbones"></i> LIVELLO 2: Allerta Rossa (Watch)</h3>
                    [cite_start]<p><strong><i class="fas fa-water"></i> Condizione:</strong> Altezza d'onda (Run-up) compresa <strong>tra 1 e 10 metri</strong>[cite: 62].</p>
                    [cite_start]<p><strong><i class="fas fa-ruler-horizontal"></i> Inondazione:</strong> Ingressione media a terra di <strong>2.00 km</strong>, con picchi di 4.00 km in prossimità delle foci dei fiumi[cite: 126].</p>
                </div>
            </div>

            <div class="procedural-section" id="proc-allertamento">
                <h2><i class="fas fa-bullhorn"></i> Procedure di Allertamento Popolazione</h2>
                [cite_start]<p>Per l'allertamento della popolazione interessata, si devono utilizzare simultaneamente i seguenti sistemi[cite: 183]:</p>
                <ul class="procedure-list">
                    [cite_start]<li><i class="fas fa-volume-up"></i><strong>Sirene e Altoparlanti:</strong> Su mezzi di servizio comunali, veicoli di emergenza e postazioni fisse[cite: 184, 185, 188].</li>
                    [cite_start]<li><i class="fas fa-mobile-alt"></i><strong>App IT-Alert:</strong> Sistema di allarme pubblico nazionale tramite cell-broadcast[cite: 186].</li>
                    [cite_start]<li><i class="fas fa-broadcast-tower"></i><strong>Canali Istituzionali:</strong> Banner su siti web comunali, social network e app di messaggistica (WhatsApp/Telegram)[cite: 187, 193, 194].</li>
                    [cite_start]<li><i class="fas fa-microphone"></i><strong>Diffusori Lidi:</strong> Microfoni e altoparlanti presso gli stabilimenti balneari[cite: 192].</li>
                </ul>
            </div>
        </div>

        <div id="NS-Rotondella" class="tab-content">
            <h2>Modello Intercomunale: Nova Siri e Rotondella</h2>
            <p>Mappa di riferimento: Pagina 13, Documento "Relazione di sintesi".</p>
            <div class="note"><strong>Nota Bene:</strong> La via di allontanamento n. [cite_start]2 (Via Amarcord...) prevede il transito di un passaggio a livello[cite: 332].</div>

            <div class="alert-section alert-orange">
                <h4 class="alert-title-orange"><i class="fas fa-triangle-exclamation"></i> Allerta Arancione (Advisory)</h4>
                <div class="grid-container">
                    <div class="card procedural-section" id="nsr-orange-aree">
                        <h3><i class="fas fa-shield-alt"></i> Aree Protezione Civile</h3>
                        <table>
                           <tbody>
                                [cite_start]<tr><td><i class="fas fa-route"></i> Vie di Allontanamento</td><td>2 percorsi principali [cite: 208]</td></tr>
                                [cite_start]<tr><td><i class="fas fa-user-friends"></i> Aree di Attesa</td><td>2 (Via Heraclea, Via Magna Grecia) [cite: 211, 329]</td></tr>
                                [cite_start]<tr><td><i class="fas fa-truck-pickup"></i> Area Ammassamento</td><td>1 (Area servizio Via Magna Grecia) [cite: 214, 329]</td></tr>
                                <tr><td><i class="fas fa-building"></i> C.O.C.</td><td>Comando P.L. - [cite_start]Piazza Papa Giovanni XXIII [cite: 329]</td></tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="card procedural-section" id="nsr-orange-cancelli">
                        <h3><i class="fas fa-traffic-light"></i> Cancelli da Attivare (N. 3)</h3>
                         <table>
                            <thead><tr><th>N°</th><th>Ubicazione</th><th>Coord. (WGS84)</th></tr></thead>
                            <tbody>
                                [cite_start]<tr><td>1</td><td>VIA IDROVORA (S.P. 107) [cite: 393][cite_start]</td><td>40°08'47.07"N 16°38'26.07"E [cite: 402]</td></tr>
                                [cite_start]<tr><td>2</td><td>VIA TRIESTE / V.LE LIBERTA' [cite: 396][cite_start]</td><td>40°07'58.04"N 16°38'30.66"E [cite: 403]</td></tr>
                                [cite_start]<tr><td>3</td><td>VIA SIRIS (S.P. 104) [cite: 399][cite_start]</td><td>40°07'45.59"N 16°38'33.70"E [cite: 404]</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <div class="alert-section alert-red">
                <h4 class="alert-title-red"><i class="fas fa-skull-crossbones"></i> Allerta Rossa (Watch)</h4>
                <div class="grid-container">
                    <div class="card procedural-section" id="nsr-red-aree">
                        <h3><i class="fas fa-shield-alt"></i> Aree Protezione Civile</h3>
                        <table>
                           <tbody>
                                [cite_start]<tr><td><i class="fas fa-route"></i> Vie di Allontanamento</td><td>4 percorsi principali [cite: 224]</td></tr>
                                [cite_start]<tr><td><i class="fas fa-user-friends"></i> Aree di Attesa</td><td>2 (Via Heraclea, Via Magna Grecia) [cite: 227, 366]</td></tr>
                                [cite_start]<tr><td><i class="fas fa-truck-pickup"></i> Area Ammassamento</td><td>1 (Area servizio Via Magna Grecia) [cite: 230, 366]</td></tr>
                                [cite_start]<tr><td><i class="fas fa-building"></i> C.O.C.</td><td>Scuola pubblica (Liceo) - Via V. Bachelet [cite: 366]</td></tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="card procedural-section" id="nsr-red-cancelli">
                        <h3><i class="fas fa-traffic-light"></i> Cancelli da Attivare (N. 7)</h3>
                        <p>Attivare i 3 cancelli dell'allerta arancione più i seguenti:</p>
                        <table>
                            <thead><tr><th>N°</th><th>Ubicazione</th><th>Coord. (WGS84)</th></tr></thead>
                           <tbody>
                                [cite_start]<tr><td>4</td><td>VIA GRAMSCI / VIA M. GRECIA [cite: 407][cite_start]</td><td>40°07'29.32"N 16°38'12.50"E [cite: 409]</td></tr>
                                [cite_start]<tr><td>5</td><td>VIA M. GRECIA / VIA GRAMSCI [cite: 412][cite_start]</td><td>40°07'31.83"N 16°38'06.30"E [cite: 414]</td></tr>
                                <tr><td>6</td><td>S.P. [cite_start]104 / VIA TRATTURO REGIO [cite: 417][cite_start]</td><td>40°08'09.13"N 16°38'06.30"E [cite: 419]</td></tr>
                                [cite_start]<tr><td>7</td><td>VIA TRATTURO REGIO / VIA HERACLEA [cite: 422][cite_start]</td><td>40°08'21.41"N 16°37'59.43"E [cite: 424]</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

         <div id="Policoro" class="tab-content">
            <h2>Modello Comunale: Policoro</h2>
            <p>Mappa di riferimento: Pagina 18, Documento "Relazione di sintesi".</p>
             [cite_start]<div class="note"><strong>Nota Bene:</strong> Diverse vie di allontanamento prevedono il transito di passaggi a livello, sottopassi S.S. 106 e il passaggio davanti al Pronto Soccorso[cite: 517, 527].</div>
            <div class="alert-section alert-orange">
                <h4 class="alert-title-orange"><i class="fas fa-triangle-exclamation"></i> Allerta Arancione (Advisory)</h4>
                 <div class="grid-container">
                    <div class="card procedural-section" id="pol-orange-aree">
                        <h3><i class="fas fa-shield-alt"></i> Aree Protezione Civile</h3>
                        <table>
                           <tbody>
                                [cite_start]<tr><td><i class="fas fa-route"></i> Vie di Allontanamento</td><td>5 percorsi [cite: 208]</td></tr>
                                [cite_start]<tr><td><i class="fas fa-user-friends"></i> Aree di Attesa</td><td>2 ("Palaercole", Campo Sportivo "Periello") [cite: 211, 506]</td></tr>
                                [cite_start]<tr><td><i class="fas fa-truck-pickup"></i> Area Ammassamento</td><td>1 (Piazza A. Moro) [cite: 214, 506]</td></tr>
                                [cite_start]<tr><td><i class="fas fa-building"></i> C.O.C./C.O.M.</td><td>Edificio Comunale / "Palaercole" [cite: 506]</td></tr>
                            </tbody>
                        </table>
                    </div>
                     <div class="card procedural-section" id="pol-orange-cancelli">
                        <h3><i class="fas fa-traffic-light"></i> Cancelli da Attivare (N. 5)</h3>
                        <table>
                            <thead><tr><th>N°</th><th>Ubicazione</th></tr></thead>
                            <tbody>
                                [cite_start]<tr><td>1</td><td>VIA SAN GIUSTO INCROCIO VIA PIAVE [cite: 532]</td></tr>
                                [cite_start]<tr><td>2</td><td>VIA CATONE INCROCIO VIA FIUME [cite: 532]</td></tr>
                                [cite_start]<tr><td>3</td><td>VIA LIDO (S.P. 91) INCROCIO VIA TRIESTE [cite: 532]</td></tr>
                                [cite_start]<tr><td>4</td><td>VIA OBERDAN INCROCIO VIA TRIESTE [cite: 532]</td></tr>
                                [cite_start]<tr><td>5</td><td>VIA MASCAGNI (S.P. 67) INCROCIO VIA TRIESTE [cite: 532]</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div class="alert-section alert-red">
                 <h4 class="alert-title-red"><i class="fas fa-skull-crossbones"></i> Allerta Rossa (Watch)</h4>
                 <div class="grid-container">
                     <div class="card procedural-section" id="pol-red-aree">
                        <h3><i class="fas fa-shield-alt"></i> Aree Protezione Civile</h3>
                        <table>
                           <tbody>
                                [cite_start]<tr><td><i class="fas fa-route"></i> Vie di Allontanamento</td><td>6 percorsi [cite: 224]</td></tr>
                                [cite_start]<tr><td><i class="fas fa-user-friends"></i> Aree di Attesa</td><td>3 (si aggiunge Parc. ex Zuccherificio) [cite: 227, 526]</td></tr>
                                [cite_start]<tr><td><i class="fas fa-truck-pickup"></i> Area Ammassamento</td><td>1 (Piazza A. Moro) [cite: 230, 526]</td></tr>
                                [cite_start]<tr><td><i class="fas fa-building"></i> C.O.C./C.O.M.</td><td>Edificio Comunale / "Palaercole" [cite: 526]</td></tr>
                           </tbody>
                        </table>
                     </div>
                     <div class="card procedural-section" id="pol-red-cancelli">
                        <h3><i class="fas fa-traffic-light"></i> Cancelli da Attivare (N. 13)</h3>
                        <p>Attivare i 5 cancelli dell'allerta arancione più i seguenti 8.</p>
                     </div>
                 </div>
            </div>
        </div>

        <div id="Scanzano" class="tab-content"><h2>Dati per Scanzano Jonico in elaborazione...</h2></div>
         <div id="Pisticci" class="tab-content"><h2>Dati per Pisticci in elaborazione...</h2></div>
         <div id="Bernalda" class="tab-content"><h2>Dati per Bernalda in elaborazione...</h2></div>

    </div>

    <footer>
        <div class="container">
            <p>Fonte Dati: Prefettura di Matera - Aggiornamento del "Piano Provinciale di Protezione Civile per il Rischio Maremoto" (Rev. 2, 2023).</p>
            <p>Questo portale è una simulazione a scopo dimostrativo e non sostituisce i documenti ufficiali e le direttive operative.</p>
        </div>
    </footer>

    <script>
        // Funzione per la navigazione a TAB
        function openTab(evt, tabName) {
            let i, tabcontent, tablinks;
            tabcontent = document.getElementsByClassName("tab-content");
            for (i = 0; i < tabcontent.length; i++) {
                tabcontent[i].style.display = "none";
            }
            tablinks = document.getElementsByClassName("tab-link");
            for (i = 0; i < tablinks.length; i++) {
                tablinks[i].className = tablinks[i].className.replace(" active", "");
            }
            document.getElementById(tabName).style.display = "block";
            evt.currentTarget.className += " active";
        }

        // Funzione per simulare la vista per operatore
        function changeOperatorView(operator) {
            const taskInfoBox = document.getElementById('task-info-box');
            const taskInfoText = document.getElementById('task-info-text');
            
            // Reset visualizzazione
            document.querySelectorAll('.procedural-section').forEach(el => {
                el.classList.remove('section-highlight');
            });
            
            taskInfoBox.style.display = 'none';

            switch(operator) {
                case 'forze_ordine':
                    taskInfoText.innerHTML = "Controllo accessi e viabilità. Evidenziati i <strong>Cancelli</strong> da presidiare.";
                    taskInfoBox.style.display = 'block';
                    document.querySelectorAll('[id*="-cancelli"]').forEach(el => el.classList.add('section-highlight'));
                    break;
                case 'sindaco':
                    taskInfoText.innerHTML = "Coordinamento comunale. Evidenziate le <strong>Aree di Protezione Civile</strong> e la localizzazione del C.O.C.";
                    taskInfoBox.style.display = 'block';
                    document.querySelectorAll('[id*="-aree"]').forEach(el => el.classList.add('section-highlight'));
                    break;
                case 'volontariato':
                    taskInfoText.innerHTML = "Assistenza alla popolazione. Evidenziate le <strong>Aree di Attesa</strong> e le <strong>Vie di Allontanamento</strong>.";
                    taskInfoBox.style.display = 'block';
                    document.querySelectorAll('[id*="-aree"]').forEach(el => el.classList.add('section-highlight'));
                    break;
                case 'tutti':
                default:
                    // Nessuna evidenziazione, vista completa
                    break;
            }
        }

        // Imposta la tab di default all'avvio
        document.addEventListener('DOMContentLoaded', () => {
            document.querySelector('.tab-link.active').click();
        });
    </script>

</body>
</html>
